# Руководство по разработке

## Введение

Этот документ определяет стандарты и правила написания кода HTML, CSS для прототипа нового сайта. Цель — обеспечить современное качество, доступность, производительность.

---

## 1. Руководство по HTML

- Используйте семантические теги: <header>, <nav>, <main>, <footer>, <section>, <article>, <aside>, <form>, <button>, <ul>, <li>, <h1>-<h6>, <label>, <fieldset>, <legend>.
- Валидность: Проверяйте HTML на валидность (https://validator.w3.org/).
- Структура:
  - Один <main> на страницу.
  - Логическая иерархия заголовков (<h1> только один).
  - Используйте <nav> для навигации, <ul> для списков.
- Атрибуты изображений:
  - Все изображения должны иметь атрибут alt с осмысленным описанием.
  - Для временных изображений используйте ссылки с сайтов-генераторов заглушек (например, https://placehold.co, https://placeimg.com, https://picsum.photos).
- Формы:
  - Используйте <label for="..."> и соответствующие id для всех полей.
  - Для групп чекбоксов/радиокнопок используйте <fieldset> и <legend>.
- ARIA и доступность:
  - Добавляйте aria-label, aria-labelledby, aria-live, aria-current, role для интерактивных и навигационных элементов.
  - Все интерактивные элементы должны быть доступны с клавиатуры.
  - Все формы должны иметь правильно связанные label и input элементы.
  - Все кнопки должны иметь текстовое содержимое или aria-label.
  - Все динамические элементы должны иметь соответствующие ARIA-атрибуты.
  - Все таблицы должны иметь заголовки и scope атрибуты.
  - Все видео должны иметь субтитры или текстовую альтернативу.
  - Все аудио должно иметь текстовую расшифровку.
- Skip links:
  - В начале <body> добавляйте ссылку для пропуска навигации: <a href="#main" class="skip-link">Перейти к основному содержимому</a>
- Контраст:
  - Цвета текста и фона должны иметь контраст не менее 4.5:1.
- Иконки:
  - Для иконок соцсетей и мессенджеров используйте только inline SVG-иконки (не подключайте сторонние CDN, не используйте base64, не вставляйте SVG как img).
  - Для всех остальных иконок используйте Material Icons (inline SVG из официальной библиотеки, также через webfont, что предпочтительнее).

---

## 2. Руководство по CSS

- Единый CSS-файл: Все стили размещайте в одном файле (пример: styles.css). Файл с рабочими стилями сайта находится в каталоге по адресу css/styles.css.
- Необходимо обеспечить максимальное использование соответствующих цветовой схеме сайта css variables.
- Все CSS-код размещайте только в файле styles.css (не допускается inline-стилизация или отдельные CSS-файлы).
- Mobile-First:
  - Сначала пишите базовые стили для мобильных устройств, затем добавляйте медиа-запросы для больших экранов.
- Группировка медиа-запросов:
  - Размещайте медиа-запросы рядом с основным селектором.
- BEM-методология:
  - Используйте блоки, элементы и модификаторы: block__element--modifier
- Сетки и выравнивание:
  - Используйте CSS Grid и Flexbox для построения сеток и адаптивных блоков.
- Переменные:
  - Используйте CSS custom properties для цветов, отступов и т.д.
  - Максимально используйте CSS custom properties (переменные) для всех повторяющихся значений: цветов, отступов, размеров, шрифтов и т.д. Это повышает поддержку и масштабируемость стилей.
- Анимации и переходы:
  - Используйте CSS-анимации для плавности.
- Доступность:
  - Стили фокуса для всех интерактивных элементов.
- Контраст:
  - Проверяйте цветовые сочетания (используйте сервисы типа https://webaim.org/resources/contrastchecker/).
- CSS должен быть структурирован: все стили и медиа-запросы для каждого блока (header, hero, windows, advantages, feedback, modal, footer и т.д.) должны быть собраны вместе, а не разбросаны по файлу. Для каждого блока должна быть секция с комментариями для навигации и поддержки.

---

## 3. Руководство по JavaScript

- Чистый JavaScript: Не используйте jQuery, Bootstrap JS и другие устаревшие библиотеки.
- Весь JavaScript-код размещайте только в файле script.js (не допускается inline-скрипты или отдельные JS-файлы) в каталоге по адресу js/script.js.
- Модульность: Организуйте код в функции или классы, избегайте глобальных переменных.
- События: Используйте addEventListener, не применяйте inline-обработчики (onclick="...").
- Доступность:
  - Обеспечьте управление с клавиатуры (например, обработка keydown для Enter/Space на кнопках).
  - Добавляйте обработчики клавиатурных событий.
  - Все функции должны работать без JavaScript (грейсфул деградация).
  - Используйте ARIA-live регионы для динамического контента.
  - Обеспечьте фокус на модальных окнах и возврат фокуса после закрытия.
- Валидация форм:
  - Проверяйте обязательные поля, корректность телефона, согласие с политикой.
  - Используйте aria-invalid для невалидных полей.
  - Добавляйте понятные сообщения об ошибках.
  - Обеспечьте доступность капчи и других защитных элементов.
  - Добавляйте подсказки для сложных полей.
- Маска телефона: Используйте функцию маскировки для поля телефона.
- Анимации: Используйте IntersectionObserver для появления элементов при прокрутке.
- Минификация: Минимизируйте JS для продакшн-версии.
- Каждый участок JavaScript-кода, отвечающий за отдельный функционал (например, модальные окна, маска телефона, анимации, меню и т.д.), должен быть обёрнут в анонимную функцию (IIFE или function expression) для изоляции и предотвращения конфликтов.
- Весь JavaScript-код должен быть размещён только в одном файле (например, script.js). Не допускается использование inline-скриптов или подключения нескольких JS-файлов.

---

## 4. Доступность (Accessibility)

- Все элементы интерфейса должны соответствовать стандартам WCAG 2.1 уровня AA.
- Все изображения должны иметь атрибут alt с осмысленным описанием.
- Все интерактивные элементы должны иметь атрибуты aria-label или aria-labelledby.
- Все формы должны иметь правильно связанные label и input элементы.
- Все кнопки должны иметь текстовое содержимое или aria-label.
- Все цветовые контрасты должны соответствовать минимальному соотношению 4.5:1.
- Все навигационные элементы должны быть доступны с клавиатуры.
- Все динамические элементы должны иметь соответствующие ARIA-атрибуты.
- Все таблицы должны иметь заголовки и scope атрибуты.
- Все видео должны иметь субтитры или текстовую альтернативу.
- Все аудио должно иметь текстовую расшифровку.
- Использовать семантические HTML5 теги (header, nav, main, article, section, footer).
- Обеспечить правильную иерархию заголовков (h1-h6).
- Использовать списки (ul, ol) для группировки связанных элементов.
- Добавлять skip-links для пропуска повторяющихся блоков.
- Обеспечить работу всех функций без JavaScript (грейсфул деградация).
- Добавлять обработчики клавиатурных событий.
- Использовать ARIA-live регионы для динамического контента.
- Обеспечить фокус на модальных окнах и возврат фокуса после закрытия.
- Добавлять понятные сообщения об ошибках.
- Использовать aria-invalid для невалидных полей.
- Обеспечить доступность капчи и других защитных элементов.
- Добавлять подсказки для сложных полей.
- Предоставлять текстовые альтернативы для всех медиа-элементов.
- Обеспечить управление медиа-плеерами с клавиатуры.
- Добавлять возможность отключения автовоспроизведения.
- Проверять сайт с помощью скринридеров (NVDA, VoiceOver).
- Тестировать навигацию с клавиатуры.
- Проверять контрастность цветов.
- Использовать инструменты автоматической проверки доступности.

---

## 5. Производительность

- Оптимизация изображений: Используйте современные форматы (WebP, AVIF), указывайте размеры.
- Отложенная загрузка: Используйте loading="lazy" для изображений вне первого экрана.
- Один CSS и JS: Подключайте только необходимые ресурсы.
- Критические стили: По возможности выносите критические стили в <head>.

---

## 7. Повторное использование кода из /example

### Можно адаптировать:
- Запрещено редактирование файлов из /example.
- Шапка и навигация: Блок .header, .header__container, .header__nav, .header__menu (см. /example/index.html, /example/styles.css).
- Футер: Блок .footer, .footer__container, .footer__main, .footer__nav (см. /example/index.html).
- Формы: Блоки .feedback-form, .contacts-form (см. /example/contacts.html, /example/styles.css).
- Модальные окна: Блок .modal и связанные элементы (см. /example/index.html, /example/styles.css, /example/script.js).
- Маска телефона: Функция maskPhone из /example/script.js.
- Анимации появления: IntersectionObserver из /example/script.js.

### Как адаптировать:
- Всегда использовать названия классков и значения строк в соответсвии с документами спиуификации сайта.
- Удалить все подключения jQuery, Bootstrap.
- Заменить все сторонние плагины на чистый JS.
- Переименовать классы, чтобы избежать конфликтов с WP (например, .header__container → .win-header__container).
- Обеспечить уникальность id и aria-атрибутов для форм и интерактивных элементов.
- Проверить все изображения на наличие осмысленных alt.

---

## 8. Использование иконок

- **Социальные сети и мессенджеры:**
  - Используйте только inline SVG-иконки, взятые из файлов каталога /example (например, .header__social-link svg, .footer__social-link svg).
  - Не используйте сторонние CDN, base64, img для SVG-иконок соцсетей.
  - Пример:
    ```html
    <a class="header__social-link" aria-label="Instagram">
      <svg>...</svg>
    </a>
    ```
- **Остальные иконки:**
  - Используйте только Material Icons либо в виде inline SVG (копируйте SVG-код из официальной библиотеки https://fonts.google.com/icons), либо через webfont (подключение через <link> и использование <span class="material-icons">icon_name</span>).
  - Не используйте сторонние библиотеки или изображения для иконок.
  - Примеры:
    ```html
    <!-- Inline SVG -->
    <svg width="24" height="24" viewBox="0 0 24 24"><path d="..."/></svg>
    <!-- Webfont -->
    <span class="material-icons" aria-hidden="true">check_circle</span>
    ```
- Все SVG должны быть оптимизированы (SVGO) и иметь атрибуты aria-hidden или aria-label для доступности.
- Не допускается использование иконок через <img> или background-image.

---

## 9. Модальные окна: требования к функционалу

- Открытие модального окна по клику на кнопку/ссылку (например, "Заказать").
- Закрытие модального окна по клику на крестик, по клику вне окна (overlay), по клавише Esc.
- Фокус при открытии модального окна должен автоматически переходить на первое поле формы.
- После закрытия модального окна фокус возвращается на элемент, с которого было открытие.
- Модальное окно должно быть доступно с клавиатуры (Tab, Shift+Tab, Esc).
- Фон страницы блокируется при открытом модальном окне (body без прокрутки).
- Для каждого модального окна используйте уникальные id и aria-атрибуты (aria-modal, aria-labelledby).
- Реализация должна обеспечивать грейсфул деградацию (форма доступна даже без JS).

---

## 10. Адаптивное меню: требования к функционалу

- Меню должно быть адаптивным (mobile-first):
  - На мобильных устройствах меню скрыто и открывается по кнопке-гамбургеру.
  - На десктопе меню всегда видно.
- Открытие/закрытие меню по клику на кнопку-гамбургер.
- Закрытие меню по клику вне меню, по клавише Esc, по клику на ссылку меню.
- Фокус при открытии меню должен переходить на первый пункт меню.
- Меню должно быть доступно с клавиатуры (Tab, Shift+Tab, Esc).
- Используйте aria-атрибуты для доступности (aria-expanded, aria-controls, aria-label).
- Не допускается дублирование кода меню для разных разрешений — используйте один HTML-блок с разными стилями.

---

## 11. Примеры архитектуры и типовых блоков

### 11.1. HTML: Базовая структура страницы

```html
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Название страницы — Ключевые слова, Город</title>
    <meta name="description" content="Краткое описание страницы с ключевыми словами и геопривязкой." />
    <!-- Остальные SEO-метатеги, Open Graph, микроразметка -->
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <a href="#main" class="skip-link">Перейти к основному содержимому</a>
    <header class="header">...</header>
    <main id="main" class="main">
      <section class="hero">...</section>
      <section class="windows" id="windows">...</section>
      <section class="advantages" id="advantages">...</section>
      <section class="feedback" id="questions">...</section>
    </main>
    <footer class="footer">...</footer>
    <script src="js/script.js"></script>
  </body>
</html>
```

### 11.2. CSS: Структурирование по блокам и переменные

```css
/* =====================
   HEADER
   ===================== */
.header { ... }
.header__nav { ... }
@media (max-width: 768px) { .header__nav { ... } }

/* =====================
   HERO
   ===================== */
.hero { ... }
.hero__title { ... }

/* =====================
   ADVANTAGES
   ===================== */
.advantages { ... }
.advantage-card { ... }
@media (min-width: 520px) { .advantages__grid { grid-template-columns: 1fr 1fr; } }

:root {
  --color-primary: #3498db;
  --color-accent: #e74c3c;
  --color-bg: #f5f7fa;
  --color-text: #222;
  --radius: 8px;
  --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
```

### 11.3. JS: Модульность через IIFE и структура файла

```js
// Мобильное меню
(function() {
  // ...код мобильного меню...
})();

// Модальное окно
(function() {
  // ...код модального окна...
})();

// Маска телефона
(function() {
  // ...код маски телефона...
})();
```

### 11.4. PHP: Пример универсального обработчика формы

```php
<?php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  $name = trim($_POST['name'] ?? '');
  $phone = trim($_POST['phone'] ?? '');
  $email = trim($_POST['email'] ?? '');
  if ($name && $phone) {
    // Здесь отправка в Telegram/email или запись в БД
    echo json_encode(['success' => true]);
  } else {
    echo json_encode(['success' => false, 'message' => 'Заполните все обязательные поля!']);
  }
  exit;
}
?>
```

### 11.5. Масштабирование для многостраничных сайтов

- Используйте одинаковую структуру header/footer на всех страницах (выносите в шаблоны или include).
- Для новых страниц создавайте отдельные секции/блоки по аналогии с главной.
- Все формы должны использовать единый обработчик и JS-модуль.
- Для SEO на каждой странице уникальные title, description, og-теги.
- При переходе по навигационным ссылкам с якорями (anchor links) должен быть реализован плавный скролл к соответствующему блоку страницы (smooth scroll), независимо от типа сайта (одностраничный или многостраничный).
- Пример структуры страниц:
  - index.html (главная)
  - about.html (о компании)
  - products.html (продукция)
  - contacts.html (контакты)
  - ...

### 11.6. Пример карточки товара/услуги (HTML + BEM)

```html
<article class="window-card">
  <div class="window-card__svg">
    <!-- SVG-иконка окна -->
  </div>
  <div class="window-card__size">80×120 см</div>
  <div class="window-card__content">
    <h3 class="window-card__title">Одностворчатые окна</h3>
    <p class="window-card__desc">Краткое описание...</p>
    <button class="window-card__button" type="button">Узнать стоимость</button>
  </div>
</article>
```

### 11.7. Пример формы с валидацией и маской телефона (HTML + JS)

```html
<form class="feedback-form" id="feedbackForm">
  <label for="feedbackName">Ваше имя</label>
  <input type="text" id="feedbackName" name="name" required />
  <label for="feedbackPhone">Телефон</label>
  <input type="tel" id="feedbackPhone" name="phone" required placeholder="+375 (__) ___-__-__" />
  <button type="submit">Отправить заявку</button>
</form>
```

```js
(function() {
  const feedbackForm = document.getElementById("feedbackForm");
  function maskPhone(input) {
    // ...логика маски...
  }
  document.querySelectorAll('input[type="tel"]').forEach(input => {
    input.addEventListener('input', () => maskPhone(input));
  });
  feedbackForm.addEventListener("submit", function (e) {
    e.preventDefault();
    // ...AJAX-отправка...
  });
})();
```

### 11.8. Пример модального окна (HTML + JS)

```html
<div class="modal" id="orderModal" aria-modal="true" aria-labelledby="orderModalTitle" tabindex="-1">
  <div class="modal__overlay"></div>
  <div class="modal__container">
    <button class="modal__close" aria-label="Закрыть окно" type="button">×</button>
    <h2 class="modal__title" id="orderModalTitle">Оставьте заявку</h2>
    <form class="modal__form" id="orderForm">...</form>
    <div class="modal__thanks" id="orderThanks" hidden>Спасибо! Ваша заявка принята.</div>
  </div>
</div>
```

```js
(function() {
  const orderModal = document.getElementById("orderModal");
  // ...логика открытия/закрытия, фокус-ловушка, отправка формы...
})();
```

---

## 12. Рекомендации по поддержке и развитию

### 12.1. Кэширование и производительность
- Настройка кэширования статических файлов на 30 минут через .htaccess
- Использование заголовков Cache-Control и Expires
- Сжатие файлов (gzip/deflate) для ускорения загрузки
- Оптимизация изображений (WebP формат, правильные размеры)
- Минификация CSS и JS для продакшн

### 12.2. Разработка и поддержка
- Всегда используйте BEM-нейминг и структурируйте CSS по блокам
- Для новых секций копируйте и адаптируйте существующие шаблоны
- Для многостраничных сайтов используйте одинаковые header/footer и JS на всех страницах
- Для интеграции с CMS (например, WordPress) выносите повторяющиеся блоки в шаблоны
- Проверяйте валидность HTML и доступность (WCAG, Lighthouse)
- Используйте только один CSS и один JS-файл
- Все формы должны быть доступны с клавиатуры и с мобильных устройств
- Для SEO на каждой странице уникальные метатеги и микроразметка

### 12.3. Мониторинг и безопасность
- Настройка Google Analytics и Яндекс.Метрики
- Отслеживание Core Web Vitals
- Мониторинг ошибок и производительности
- Регулярное обновление зависимостей
- Валидация всех пользовательских данных
- Защита от XSS и CSRF атак
- Использование HTTPS

---

(Все существующие правила и разделы остаются без изменений, добавлены только новые примеры и рекомендации.)